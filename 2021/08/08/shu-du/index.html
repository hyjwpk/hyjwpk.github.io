<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="数独, Hyjwpk">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>数独 | Hyjwpk</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hyjwpk" type="application/atom+xml">
</head>

<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>


   <style>
    body{
       background-image: url(/medias/featureimages/4.jpg);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Hyjwpk</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Hyjwpk</div>
        <div class="logo-desc">
            
            Persist, and anything will be within your reach.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hyjwpk/hyjwpk.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #007FFF;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hyjwpk/hyjwpk.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/1.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">数独</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/unity/">
                                <span class="chip bg-color">unity</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%A4%A7%E4%BD%9C%E4%B8%9A/" class="post-category">
                                大作业
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-08-08
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-02-04
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    27 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="程序设计II大作业实验报告"><a href="#程序设计II大作业实验报告" class="headerlink" title="程序设计II大作业实验报告"></a>程序设计II大作业实验报告</h1><h2 id="实验题目与要求"><a href="#实验题目与要求" class="headerlink" title="实验题目与要求"></a>实验题目与要求</h2><p>本次实验主要内容是实现一个简单的数独软件,具体要求如下</p>
<h3 id="基本功能部分"><a href="#基本功能部分" class="headerlink" title="基本功能部分"></a>基本功能部分</h3><h4 id="程序说明信息以及交互"><a href="#程序说明信息以及交互" class="headerlink" title="程序说明信息以及交互"></a>程序说明信息以及交互</h4><p>程序运行后,显示游戏开始界面,此时点击任意位置进入游戏</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%BC%80%E5%A7%8B%E7%95%8C%E9%9D%A2.jpg" alt="开始界面"></p>
<p>在进入游戏过程中会显示游戏基本操作说明</p>
<p><img src="%E5%9B%BE%E7%89%87/%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF.jpg" alt="提示信息"></p>
<p>其余游戏基本功能在游戏中通过按钮可以清晰展示,<strong>无需额外说明</strong></p>
<p><img src="%E5%9B%BE%E7%89%87/%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2.jpg" alt="游戏界面"></p>
<p>点击退出按钮即可退出游戏</p>
<h4 id="打印数独"><a href="#打印数独" class="headerlink" title="打印数独"></a>打印数独</h4><p>在游戏过程中数独的当前状态在屏幕左侧动态显示出来,故<strong>无需额外打印数独操作</strong></p>
<h4 id="输入数独"><a href="#输入数独" class="headerlink" title="输入数独"></a>输入数独</h4><p>点击自定义按钮,进入接受输入数独状态</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%85%A5%E6%95%B0%E7%8B%AC1.jpg" alt="输入数独1"></p>
<blockquote>
<p>输入是合法的（输入全是数字字符,且已填入位置的行列对角线九宫格不重复）</p>
</blockquote>
<p>输入过程中,由于按钮的设计,在试图输入不合法的数字时,点击按钮无效,数字不被接受,因此可以保证输入是合法的</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%85%A5%E6%95%B0%E7%8B%AC2.jpg" alt="输入数独2"></p>
<blockquote>
<p>我们可以确定的是,对普通数独（9x9）,目前已知至少要有17 个已知数字才可能有唯一解。</p>
</blockquote>
<p>在点击确定后,至少含17个数字的合法数独会被固定成为题目,其中题目的数字用<em><strong>蓝色</strong></em>显示,与用<em><strong>白色</strong></em>显示的玩家填入的数字区分</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%85%A5%E6%95%B0%E7%8B%AC3.jpg" alt="输入数独3"></p>
<h4 id="生成数独"><a href="#生成数独" class="headerlink" title="生成数独"></a>生成数独</h4><p>点击新游戏按钮后,程序将会自动生成一个合法数独,此处我使用<strong>挖空法</strong>来保证生成的数独是有解的,但并不保证有<strong>唯一解</strong></p>
<p><img src="%E5%9B%BE%E7%89%87/%E7%94%9F%E6%88%90%E6%95%B0%E7%8B%AC.jpg" alt="生成数独"></p>
<p>生成的题目中预先给出的数字个数统一设定为21</p>
<h4 id="输出数独的解"><a href="#输出数独的解" class="headerlink" title="输出数独的解"></a>输出数独的解</h4><p>点击解答按钮,如果数独有解,输出数独的一个解</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%87%BA%E8%A7%A3.jpg" alt="输出解"></p>
<h4 id="填入数字合法情况"><a href="#填入数字合法情况" class="headerlink" title="填入数字合法情况"></a>填入数字合法情况</h4><p>通过点击按钮向数独中填入数字</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%971.jpg" alt="输入数字1"></p>
<p>如果填入数字合法,将会在数独中直接显示</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%972.jpg" alt="输入数字2"></p>
<h4 id="填入数字异常情况"><a href="#填入数字异常情况" class="headerlink" title="填入数字异常情况"></a>填入数字异常情况</h4><blockquote>
<p>如果试图修改题目固定的数字</p>
</blockquote>
<p><strong>蓝色</strong>显示的题目固定的数字方格在点击后也会显示1-9的小按钮,但点击后无任何反应</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%90%88%E6%B3%95%E6%95%B0%E5%AD%971.jpg" alt="合法数字1"></p>
<blockquote>
<p>如果填入的数字过大</p>
</blockquote>
<p>输入数字只能使用输入1-9,不存在填入的数字过大的情况</p>
<blockquote>
<p>如果输入的填入位置不合法</p>
</blockquote>
<p>输入数字只能使用每个数字方格对应的按钮输入,不存在填入位置不合法的情况</p>
<blockquote>
<p>如果填入的数字和已有数字重复</p>
</blockquote>
<p>在填入的数字如果与行列对角线九宫格重复,数字将不会被填入,同时所有相同数字会被标为<strong>红色</strong>以提示错误</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%90%88%E6%B3%95%E6%95%B0%E5%AD%972.jpg" alt="合法数字2"></p>
<h4 id="数独提示信息"><a href="#数独提示信息" class="headerlink" title="数独提示信息"></a>数独提示信息</h4><p>点击提示按钮后,程序将会求解当前数独,选取其中的一个解,并按照从左到右,从上到下的顺序,选择第一个未填数字的方格显示答案中应有的数字</p>
<p><img src="%E5%9B%BE%E7%89%87/%E6%8F%90%E7%A4%BA.jpg" alt="提示"></p>
<p>可以通过不停的提示获得最终的一个解</p>
<h4 id="保存游戏状态"><a href="#保存游戏状态" class="headerlink" title="保存游戏状态"></a>保存游戏状态</h4><p>点击存档按钮可以打开存档列表,在游戏中设计了五个存档位置,可以保存5个不同的存档</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%AD%98%E6%A1%A31.jpg" alt="存档1"></p>
<p>在每个存档的右侧有<strong>存档</strong>和<strong>读档</strong>两个按钮,点击存档会显示存档名输入界面</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%AD%98%E6%A1%A32.jpg" alt="存档2"></p>
<p>在此界面可以使用键盘输入存档名字,存档名字只可以为英文大写字母,并且不支持删除字母</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%AD%98%E6%A1%A33.jpg" alt="存档3"></p>
<p>点击确定后存档保存完成,存档名输入界面和存档列表淡出,恢复到数独界面</p>
<p>如果保存的存档位置已有存档,将会覆盖原先的存档,不同存档的存档名可以相同</p>
<h4 id="加载游戏状态"><a href="#加载游戏状态" class="headerlink" title="加载游戏状态"></a>加载游戏状态</h4><p>点击存档按钮可以打开存档列表,点击读档即可载入先前保存的存档</p>
<p><img src="%E5%9B%BE%E7%89%87/%E8%AF%BB%E6%A1%A3.jpg" alt="读档"></p>
<p>在存档名中会记录存档保存的时间,存档中存有题目以及玩家输入的数字</p>
<h3 id="扩展部分"><a href="#扩展部分" class="headerlink" title="扩展部分"></a>扩展部分</h3><h4 id="图形化界面"><a href="#图形化界面" class="headerlink" title="图形化界面"></a>图形化界面</h4><p>图形化界面用<code>Unity 2021.1.7f1c1 (64-bit)</code>实现,脚本语言采用<code>C#</code></p>
<h4 id="高级搜索技巧"><a href="#高级搜索技巧" class="headerlink" title="高级搜索技巧"></a>高级搜索技巧</h4><p>在基础的DFS算法之外,实现了GBFS(贪婪最佳优先算法)与DLX(跳舞链)两种高级搜索算法,都可以独立完成对对角线数独的求解</p>
<p><img src="%E5%9B%BE%E7%89%87/%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A71.jpg" alt="高级搜索技巧1"></p>
<p>设计了四个选项按钮,在解答前选择不同的选项,再点击解答按钮将会采用不同的算法进行求解,同时四个按钮在同一时刻仅能有一个被选中</p>
<p><img src="%E5%9B%BE%E7%89%87/%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A72.jpg" alt="高级搜索技巧2"></p>
<blockquote>
<p>Issues #90<br><br>zhiyuan @PB17121741<br><br>这一得分点的设置目的主要是鼓励同学们了解通用的高级搜索技术,并将其进行具体实现。对于特化的一些解数独的算法其实偏离了我们的设计目的。如果使用dlx算法作为高级算法提交,首先需要额外增加数独类型开关,指定数独为不考虑对角线的数独；其次实现dlx算法解不考虑对角线的数独。</p>
</blockquote>
<p>实际上,DLX算法可以实现对<strong>对角线数独</strong>的求解,因此未增加数独类型开关,而是实现了DLX对对角线数独的求解</p>
<h4 id="多线程优化"><a href="#多线程优化" class="headerlink" title="多线程优化"></a>多线程优化</h4><p>使用多线程技术,采用DLX算法并行搜索输出数独全部的解</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%961.jpg" alt="多线程优化1"></p>
<p>选择DLX多线程选项后点击解答,会在数独右侧显示<strong>上一个</strong>和<strong>下一个</strong>两个按钮</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%962.jpg" alt="多线程优化2"></p>
<p>点击<strong>下一个</strong>后可以开始查看数独所有可能的解</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%963.jpg" alt="多线程优化3"></p>
<p>点击<strong>上一个</strong>和<strong>下一个</strong>可以在不同的解之间进行切换</p>
<p><img src="%E5%9B%BE%E7%89%87/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%964.jpg" alt="多线程优化4"></p>
<h2 id="具体设计"><a href="#具体设计" class="headerlink" title="具体设计"></a>具体设计</h2><p>该部分<strong>简单介绍</strong>实验中的函数拆分与图形化实现的细节,例如,包括哪些函数,函数参数是什么,作用是什么等。扩展功能的介绍等。</p>
<h3 id="数独基本单元的构造"><a href="#数独基本单元的构造" class="headerlink" title="数独基本单元的构造"></a>数独基本单元的构造</h3><p>使用预制体<code>prefab</code>来构造数独方格,然后进行实例化</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">for (int i = 0; i &lt; 9; i++)
    for (int j = 0; j &lt; 9; j++)
    {
        Data.unitarray[i, j] = Instantiate(prefab);
        Data.unitarray[i, j].transform.GetComponent&lt;Unit&gt;().i = i; Data.unitarray[i, j].transform.GetComponent&lt;Unit&gt;().j = j;
        Data.unitarray[i, j].GetComponent&lt;RectTransform&gt;().localPosition = new Vector3((j / 3) * 20 + 95 * j + 1920 / 2 - 700, -(i / 3) * 20 - 95 * i + 1080 / 2 + 420);
        Data.unitarray[i, j].transform.SetParent(father);
    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>数独方格本身是一个按钮,又包含9个小按钮来支持数字的修改</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">public void ChangevalueByButton(int number)//通过按钮修改单元的值
{
    int i = transform.GetComponent&lt;Unit&gt;().i, j = transform.GetComponent&lt;Unit&gt;().j;
    if (Data.question[i][j] != 0) return;
    if (Sudoku.put(ref Data.condition, i, j, number))
        Sudoku.printSudoku(ref Data.condition);
    else
    {
        Sudoku.printSudoku(ref Data.condition);
        for(int m=0;m&lt;9;m++)
            for(int n=0;n&lt;9;n++)
                if(Data.condition[m][n]==number) 
                    Data.unitarray[m,n].transform.Find("Value").GetComponent&lt;Text&gt;().color = new Color(1, (50f / 255), 0);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>同时支持外部函数调用来修改数字</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">public void Changevalue(int number)//修改单元的值
{
    int i = transform.GetComponent&lt;Unit&gt;().i, j = transform.GetComponent&lt;Unit&gt;().j;
    if (number == 0)
        transform.Find("Value").GetComponent&lt;Text&gt;().text = "";
    else
        transform.Find("Value").GetComponent&lt;Text&gt;().text = number.ToString();
    if (Data.question[i][j] == 0)
        transform.Find("Value").GetComponent&lt;Text&gt;().color = new Color(1, 1, 1);
    else
        transform.Find("Value").GetComponent&lt;Text&gt;().color = new Color((71f / 255), (243f / 255), 1);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>增加了对鼠标右键点击的监听,通过鼠标右键来删除已填写的数字</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">void Start()
{
    rightClick.AddListener(new UnityAction(ButtonRightClick));
}
public void OnPointerClick(PointerEventData eventData)
{
    if (eventData.button == PointerEventData.InputButton.Right)
        rightClick.Invoke();
}
private void ButtonRightClick()//右键删除数字
{
    int i = transform.GetComponent&lt;Unit&gt;().i, j = transformGetComponent&lt;Unit&gt;().j;
    if (Data.question[i][j] != (char)0) return;
    Data.condition[i][j] = (char)0;
    Sudoku.printSudoku(ref Data.condition);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="数据的存储"><a href="#数据的存储" class="headerlink" title="数据的存储"></a>数据的存储</h3><p>使用静态类<code>Data</code>来实现对基本变量的统一调度</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public GameObject[,] unitarray = new GameObject[10, 10];
static public List&lt;List&lt;char&gt;&gt; question = new List&lt;List&lt;char&gt;&gt;(9);
static public List&lt;List&lt;char&gt;&gt; condition = new List&lt;List&lt;char&gt;&gt;(9);
static public List&lt;List&lt;char&gt;&gt; solution = new List&lt;List&lt;char&gt;&gt;(9);
static public int now;//当前sudoku的解的序数,从1开始
static public int sudokunum;//当前的sudoku的数组下标,从0开始
static public List&lt;DLX&gt; sudoku = new List&lt;DLX&gt;();
static public List&lt;List&lt;List&lt;int&gt;&gt;&gt; matrix = new List&lt;List&lt;List&lt;int&gt;&gt;&gt;();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>同时编写了对<code>List&lt;List&lt;char&gt;&gt;</code>进行初始化与拷贝的函数</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public void initboard(ref List&lt;List&lt;char&gt;&gt; board)//初始化
{
    board.Clear();
    for (int i = 0; i &lt; 9; i++)
    {
        List&lt;char&gt; row = new List&lt;char&gt; { (char)0, (char)0, (char)0, (char)0, (char)0, (char)0, (char)0, (char)0, (char)0 };
        board.Add(row);
    }
}
static public void copyboard(ref List&lt;List&lt;char&gt;&gt; des, refList&lt;List&lt;char&gt;&gt; sorce)//复制
{
    des.Clear();
    for (int i = 0; i &lt; 9; i++)
    {
        List&lt;char&gt; row = new List&lt;char&gt;();
        for (int j = 0; j &lt; 9; j++)
            row.Add(sorce[i][j]);
        des.Add(row);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数独的基本本功能"><a href="#数独的基本本功能" class="headerlink" title="数独的基本本功能"></a>数独的基本本功能</h3><h4 id="当前数独状态的输出"><a href="#当前数独状态的输出" class="headerlink" title="当前数独状态的输出"></a>当前数独状态的输出</h4><p>通过调用数独方格的<code>public void Changevalue(int number)</code>来实现输出</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public void printSudoku(ref List&lt;List&lt;char&gt;&gt; board)//输出数独
{
    for (int i = 0; i &lt; 9; i++)
        for (int j = 0; j &lt; 9; j++)
            Data.unitarray[i, j].GetComponent&lt;Unit&gt;().Changevalue((int)(board[i][j]));
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="dfs算法求解数独"><a href="#dfs算法求解数独" class="headerlink" title="dfs算法求解数独"></a>dfs算法求解数独</h4><p>使用深度优先搜索完成对数独的求解</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static private void dfs(ref List&lt;List&lt;char&gt;&gt; board, int pos)//深度优先索
{
    if (pos == spaces.Count)
    {
        valid = true;
        return;
    }
    int i = spaces[pos].Key, j = spaces[pos].Value;
    int mask = line[i] | column[j] | block[i / 3, j / 3];
    if (i == j) mask |= diagonal[0]; if (i + j == 8) mask |= diagonal[1];//x数独
    mask = ~(mask) &amp; 0x1ff;
    for (; mask != 0 &amp;&amp; !valid; mask &amp;= (mask - 1))
    {
        int digit = __builtin_ctz(mask);
        flip(i, j, digit);
        board[i][j] = (char)(digit + 1);
        dfs(ref board, pos + 1);
        flip(i, j, digit);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>为提高效率,对数独行列九宫格对角线的状态进行<code>状态压缩</code></p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static private int __builtin_ctz(int x)//获取二进制数末尾的0的个数
{
    int digit = 0;
    while ((x &amp; (1 &lt;&lt; digit)) == 0) digit++;
    return digit;
}

static private void flip(int i, int j, int digit)//改变某一位状态
{
    line[i] ^= (1 &lt;&lt; digit);
    column[j] ^= (1 &lt;&lt; digit);
    block[i / 3, j / 3] ^= (1 &lt;&lt; digit);
    if (i == j) diagonal[0] ^= 1 &lt;&lt; digit; if (i + j == 8) diagonal[1] ^= 1 &lt;&lt; digit;//x数独
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="提示功能"><a href="#提示功能" class="headerlink" title="提示功能"></a>提示功能</h4><p>通过求解数独再选取第一个空格填入正确答案来实现提示</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public KeyValuePair&lt;int, int&gt; hint(ref List&lt;List&lt;char&gt;&gt; board)/提示
{
    KeyValuePair&lt;int, int&gt; pos = new KeyValuePair&lt;int, int&gt;(-1, -1);
    if (isfinish(ref board)) return pos;
    for (int i = 0; i &lt; 9; i++)
        for (int j = 0; j &lt; 9; j++)
            if (pos.Key == -1 &amp;&amp; board[i][j] == (char)0) pos = new KeyValuePair&lt;int, int&gt;(i, j);
    if (solve_Sudoku(ref board))
        return pos;
    return new KeyValuePair&lt;int, int&gt;(-1, -1);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="整个数独合法性的判断"><a href="#整个数独合法性的判断" class="headerlink" title="整个数独合法性的判断"></a>整个数独合法性的判断</h4><p>逐个将数字填入,并更新行列九宫格对角线的状态,直到数字填完或出现矛盾为止</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public bool judge(ref List&lt;List&lt;char&gt;&gt; board, bool output)//整数独判断
{
    for (int i = 0; i &lt; 9; i++)
        for (int j = 0; j &lt; 9; j++)
            if (board[i][j] &lt; 0 || board[i][j] &gt; 9)
                return false;
    Array.Clear(line, 0, line.Length);
    Array.Clear(column, 0, column.Length);
    Array.Clear(block, 0, block.Length);
    Array.Clear(diagonal, 0, diagonal.Length);//x数独
    valid = false;
    for (int i = 0; i &lt; 9; ++i)
        for (int j = 0; j &lt; 9; ++j)
            if (board[i][j] != 0)
            {
                int digit = board[i][j] - 1;
                int mask = line[i] | column[j] | block[i / 3, j / 3];
                if (i == j) mask |= diagonal[0]; if (i + j == 8) mask |= diagonal[1];//x数独
                if (((1 &lt;&lt; digit) &amp; mask) != 0)
                    return false;
                flip(i, j, digit);
            }
    return true;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="填入数字"><a href="#填入数字" class="headerlink" title="填入数字"></a>填入数字</h4><p>将数字填入后调用<code>static public bool judge(ref List&lt;List&lt;char&gt;&gt; board, bool output)</code>进行判断</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public bool put(ref List&lt;List&lt;char&gt;&gt; board, int line, intcolumn, int number)//填入数字
{
    board[line][column] = (char)number;
    if (!judge(ref board, true))
    {
        board[line][column] = (char)0;
        return false;
    }
    return true;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="生成数独-1"><a href="#生成数独-1" class="headerlink" title="生成数独"></a>生成数独</h4><p>采用挖空法生成数独以保证数独有解,首先随机填入6个数字,然后对数独进行求解,求解完成后再随机挖去50个数字得到最终的题目</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public void generate(ref List&lt;List&lt;char&gt;&gt; board)//生成数独
{
    int step = 0;
    while (true)
    {
        int number, line, column;
        while (step &lt;= 6)
        {
            number = ra.Next(1, 9); line = ra.Next(0, 8); column = raNext(0, 8);
            board[line][column] = (char)(number);
            if (!judge(ref board, false)) board[line][column] = (char)0;
            else step++;
        }
        if (solve_Sudoku(ref board)) break;
    }
    for (step = 1; step &lt;= 60; step++)
    {
        int line = ra.Next(0, 9), column = ra.Next(0, 9);
        if (board[line][column] == 0) step--;
        board[line][column] = (char)(0);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="判断数独是否解答完毕"><a href="#判断数独是否解答完毕" class="headerlink" title="判断数独是否解答完毕"></a>判断数独是否解答完毕</h4><p>逐个判断每个格子是否都有数字填入,因不合法的数字的填入不被允许,因此数字全部填入后一定是满足题目的合法解</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public bool isfinish(ref List&lt;List&lt;char&gt;&gt; board)//判断游戏是否完成
{
    for (int i = 0; i &lt; 9; ++i)
        for (int j = 0; j &lt; 9; ++j)
            if (board[i][j] == 0)
                return false;
    return true;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>使用<code>Update()</code>动态检测数独是否完成</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">void Update()//检测游戏是否完成
{
    if (Sudoku.isfinish(ref Data.condition))
        transform.GetComponent&lt;Animator&gt;().SetBool("End", true);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="存档功能"><a href="#存档功能" class="headerlink" title="存档功能"></a>存档功能</h3><p>存档功能依托于Unity的本地持久化类<code>PlayerPrefs</code>,但它不能存储数组,因此编写了<code>PlayerPrefsX</code>类来实现对数独的二维数字的存取</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">public static class PlayerPrefsX
{
    public static void SetInt2Array(string key, int[,] int2Array)//保存二维数组
    {
        int[] intArray = new int[81];
        for (int i = 0; i &lt; 9; i++)
            for (int j = 0; j &lt; 9; j++)
                intArray[i * 9 + j] = int2Array[i, j];
        SetIntArray(key, intArray);
    }

    public static int[,] GetInt2Array(string key)//获取二维数组
    {
        int[] intArray = GetIntArray(key);
        if (intArray.Length == 0)
        {
            intArray = new int[81];
            Array.Clear(intArray, 0, intArray.Length);
        }
        int[,] int2Array = new int[10, 10];
        for (int i = 0; i &lt; 9; i++)
            for (int j = 0; j &lt; 9; j++)
                int2Array[i, j] = intArray[i * 9 + j];
        return int2Array;
    }

    public static bool SetIntArray(string key, int[] intArray)//保存一维数组
    {
        if (intArray.Length == 0) return false;

        System.Text.StringBuilder sb = new System.Text.StringBuilder();
        for (int i = 0; i &lt; intArray.Length - 1; i++)
            sb.Append(intArray[i]).Append("|");
        sb.Append(intArray[intArray.Length - 1]);

        try { PlayerPrefs.SetString(key, sb.ToString()); }
        catch { return false; }
        return true;
    }

    public static int[] GetIntArray(string key)//获取一维数组
    {
        if (PlayerPrefs.HasKey(key))
        {
            string[] stringArray = PlayerPrefs.GetString(key).Split("|"[0]);
            int[] intArray = new int[stringArray.Length];
            for (int i = 0; i &lt; stringArray.Length; i++)
                intArray[i] = Convert.ToInt32(stringArray[i]);
            return intArray;
        }
        return new int[0];
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>实现了读取时间并将其格式化为字符串的功能</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">public static String time() //获取当前时间
{
    int hour = DateTime.Now.Hour, minute = DateTime.Now.Minute, second = DateTime.Now.Second,
    year = DateTime.Now.Year, month = DateTime.Now.Month, day = DateTime.Now.Day;
    return string.Format("{0:D2}:{1:D2}:{2:D2} " + "{3:D4}/{4:D2}/{5:D2}", hour, minute, second, year, month, day);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>通过<code>Keycode</code>枚举读取用户输入的存档名字母</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">if (inputnumber != 0)
    if (Input.anyKeyDown)
        foreach (KeyCode keyCode in Enum.GetValues(typeof(KeyCode)))
            if (Input.GetKeyDown(keyCode) &amp;&amp; ((int)keyCode) &gt;= 97 &amp;&amp; ((int)keyCode) &lt;= 122)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="GBFS算法的实现"><a href="#GBFS算法的实现" class="headerlink" title="GBFS算法的实现"></a>GBFS算法的实现</h3><p>在DFS的每一步都对当前局面进行判断,启发式的寻找可行状态数最少的空继续迭代,同时也能够在最小状态数为0时回溯</p>
<p>使用<code>static private KeyValuePair&lt;int, int&gt; find(ref List&lt;List&lt;char&gt;&gt; board)</code>启发式寻找下一层迭代的最优位置</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static private KeyValuePair&lt;int, int&gt; find(ref List&lt;List&lt;char&gt;&gt; board)
{
    int max = int.MaxValue; KeyValuePair&lt;int, int&gt; pos = new KeyValuePair&lt;int, int&gt;(-1, -1);
    for (int i = 0; i &lt; 9; i++)
        for (int j = 0; j &lt; 9; j++)
        {
            if (board[i][j] == 0)
            {
                int mask = line[i] | column[j] | block[i / 3, j / 3];
                if (i == j) mask |= diagonal[0]; if (i + j == 8) mask |= diagonal[1];//x数独
                mask = ~(mask) &amp; 0x1ff;
                if (mask == 0) return new KeyValuePair&lt;int, int&gt;(-1, -1);
                int num = 1;
                while ((mask &amp;= (mask - 1)) != 0) num++;
                if (num == 1) return new KeyValuePair&lt;int, int&gt;(i, j);
                if (num &lt; max) pos = new KeyValuePair&lt;int, int&gt;(i, j);
            }
        }
    return pos;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="DLX算法实现"><a href="#DLX算法实现" class="headerlink" title="DLX算法实现"></a>DLX算法实现</h3><blockquote>
<p>在计算机科学中,X算法可用来求解精确覆盖问题。此名称最早在高德纳的论文《舞蹈链》中出现,他认为此算法是“试错法中最显而易见”的。就技术而言,X算法是一个深度优先的不确定性回溯算法。由于X算法是一个解决精确覆盖问题的简洁方法,高德纳希望通过该算法体现舞蹈链数据结构的高效性,他把使用后者的X算法称为DLX。</p>
</blockquote>
<p>DLX算法的基本框架如下</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">
public class Node
{
    public Node up; public Node down; public Node left; public Node right; public Node colRoot; public Node rowRoot;
    public int Num; public int Size;//行数 列元素数
    public Node(int i = -1) //构造函数
    {
        Num = i;
        Size = 0;
    }
};

private Node Head;
private List&lt;int&gt; result = new List&lt;int&gt;();
private int _row, _col;
public List&lt;List&lt;int&gt;&gt; solve = new List&lt;List&lt;int&gt;&gt;();
public DLX(ref List&lt;List&lt;int&gt;&gt; matrix, int m, int n)//构造函数
{
    _row = m;
    _col = n;
    Head = new Node();
    Head.up = Head;
    Head.down = Head;
    Head.right = Head;
    Head.left = Head;
    init();
    link(ref matrix);
}
private void init()//初始化行列
{
    Node newNode;
    for (int ix = 0; ix &lt; _col; ++ix) //表头向后构造列对象
    {
        newNode = new Node();
        newNode.up = newNode;
        newNode.down = newNode;
        newNode.right = Head.right;
        newNode.left = Head;
        newNode.right.left = newNode;
        Head.right = newNode;
    }
    for (int ix = 0; ix &lt; _row; ++ix) //表头向下构造行对象
    {
        newNode = new Node(_row - ix);
        newNode.down = Head.down;
        newNode.up = Head;
        newNode.down.up = newNode;
        Head.down = newNode;
    }
}
private void link(ref List&lt;List&lt;int&gt;&gt; matrix)//连接各个节点
{
    Node current_row = Head, current_col, newNode, current; //当前行对象,当前列对象,新节点,当前节点
    for (int row = 0; row &lt; _row; ++row)
    {
        current_row = current_row.down; current_col = Head;
        for (int col = 0; col &lt; _col; ++col)
        {
            current_col = current_col.right;
            if (matrix[row][col] == 0)
                continue;
            newNode = new Node();
            newNode.colRoot = current_col;
            newNode.rowRoot = current_row;
            newNode.down = current_col;
            newNode.up = current_col.up;
            newNode.up.down = newNode;
            current_col.up = newNode;
            if (current_row.Size == 0)
            {
                current_row.right = newNode;
                newNode.left = newNode;
                newNode.right = newNode;
                current_row.Size++;
            }
            current = current_row.right;
            newNode.left = current.left;
            newNode.right = current;
            newNode.left.right = newNode;
            current.left = newNode;
            current_col.Size++;
        }
    }
}
private void cover(ref Node cRoot) //覆盖列
{
    cRoot.left.right = cRoot.right;
    cRoot.right.left = cRoot.left; //删除该列对象
    Node i = cRoot.down, j;
    while (i != cRoot)
    {
        j = i.right;
        while (j != i)
        {
            j.down.up = j.up;
            j.up.down = j.down;
            j.colRoot.Size--;
            j = j.right;
        }
        i = i.down;
    }
}
private void recover(ref Node cRoot) //恢复列
{
    Node i = cRoot.up, j;
    while (i != cRoot)
    {
        j = i.left;
        while (j != i)
        {
            j.colRoot.Size++;
            j.down.up = j;
            j.up.down = j;
            j = j.left;
        }
        i = i.up;
    }
    cRoot.right.left = cRoot;
    cRoot.left.right = cRoot;
}
public bool Search(int k = 0)//搜索求解
{
    if (Head.right == Head)
        return true;
    Node cRoot = new Node(), c;
    int minSize = int.MaxValue;
    for (c = Head.right; c != Head; c = c.right) //启发式搜索
    {
        if (c.Size &lt; minSize)
        {
            minSize = c.Size;
            cRoot = c;
            if (minSize == 1)
                break;
            if (minSize == 0)
                return false;
        }
    }
    cover(ref cRoot);
    Node current_row, current;
    for (current_row = cRoot.down; current_row != cRoot; current_row = current_row.down)
    {
        result.Add(current_row.rowRoot.Num);
        for (current = current_row.right; current != current_row; current = current.right)
        {
            cover(ref current.colRoot);
        }
        if (Search(k + 1))
            return true;
        for (current = current_row.left; current != current_row; current = current.left)
            recover(ref current.colRoot);
        result.RemoveAt(result.Count - 1);
    }
    recover(ref cRoot);
    return false;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在DLX算法中,将精准覆盖问题抽象成从某个01矩阵中选取某些行,使得得到的子矩阵的每一列都有且仅有一个1</p>
<p>求解数独问题也可以看成一个精准覆盖问题,数独的每个限制条件都可以当作矩阵的一列,分别有:数独每一格都有数字(81)+行不重复(81)+列不重复(81)+九宫格不重复(81)+对角线不重复(18)=342列,在数独的一个格子填入的一个数字可以抽象成矩阵的一行,这样就可以将对角线数独转化为01矩阵从而用DLX算法进行求解</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public List&lt;List&lt;int&gt;&gt; sudoku2matrix(string problem) //将数独转为01矩阵
{
    List&lt;List&lt;int&gt;&gt; matrix = new List&lt;List&lt;int&gt;&gt;();
    for (int ix = 0; ix &lt; 81; ++ix)
    {
        int val = problem[ix];
        List&lt;int&gt; current_row = new List&lt;int&gt;();
        //for (int i = 1; i &lt;= 324; i++) current_row.Add(0);
        for (int i = 1; i &lt;= 342; i++) current_row.Add(0); //x数独
        if (val != 0)
        {
            current_row[ix] = 1;
            current_row[81 + ix / 9 * 9 + val - 1] = 1;
            current_row[162 + ix % 9 * 9 + val - 1] = 1;
            current_row[243 + (ix / 9 / 3 * 3 + ix % 9 / 3) * 9 + val - 1] = 1;
            if (ix / 9 == ix % 9)//x数独
                current_row[324 + val - 1] = 1; //x数独
            if (ix / 9 + ix % 9 == 8)//x数独
                current_row[333 + val - 1] = 1; //x数独
            matrix.Add(current_row);
            continue;
        }
        for (int jx = 0; jx &lt; 9; ++jx)
        {
            List&lt;int&gt; current_row2 = new List&lt;int&gt;();
            //for (int i = 1; i &lt;= 324; i++) current_row2.Add(0); 
            for (int i = 1; i &lt;= 342; i++) current_row2.Add(0); //x数独
            current_row2[ix] = 1;
            current_row2[81 + ix / 9 * 9 + jx] = 1;
            current_row2[162 + ix % 9 * 9 + jx] = 1;
            current_row2[243 + (ix / 9 / 3 * 3 + ix % 9 / 3) * 9 + jx] = 1;
            if (ix / 9 == ix % 9)//x数独
                current_row2[324 + jx] = 1; //x数独
            if (ix / 9 + ix % 9 == 8)//x数独
                current_row2[333 + jx] = 1; //x数独
            matrix.Add(current_row2);
        }
    }
    return matrix;
}
public List&lt;int&gt; matrix2sudoku(ref List&lt;List&lt;int&gt;&gt; matrix, List&lt;int&gt;result) //将01矩阵转换为数独（也可以static）
{
    List&lt;int&gt; solution = new List&lt;int&gt;();
    for (int i = 1; i &lt;= 81; i++) solution.Add(0);
    for (int ix = 0; ix &lt; 81; ++ix)
    {
        List&lt;int&gt; current = matrix[result[ix] - 1];
        int pos = 0, val = 0;
        for (int jx = 0; jx &lt; 81; ++jx)
        {
            if (current[jx] == 1)
                break;
            ++pos;
        }
        for (int kx = 81; kx &lt; 162; ++kx)
        {
            if (current[kx] == 1)
                break;
            ++val;
        }
        solution[pos] = val % 9 + 1;
    }
    return solution;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="多线程求全部解"><a href="#多线程求全部解" class="headerlink" title="多线程求全部解"></a>多线程求全部解</h3><p>找到数独的第一个空格,分别填入1-9,判断合法性后,对合法的情况分别用DLX算法求解</p>
<pre class="line-numbers language-C#" data-language="C#"><code class="language-C#">static public void solve()//测试函数
{
    for (int i = 0; i &lt; 9; i++)
        for (int j = 0; j &lt; 9; j++)
            if (Data.solution[i][j] == 0)
            {
                for (int k = 1; k &lt;= 9; k++)
                {
                    Data.solution[i][j] = (char)k;
                    if (Sudoku.judge(ref Data.solution, false))
                    {
                        List&lt;List&lt;char&gt;&gt; branch = new List&lt;List&lt;char&gt;&gt;();//复制solution中的内容到branch,避免不同线程读取时solution改变
                        Data.initboard(ref branch);
                        for(int m=0;m&lt;9;m++)
                            for(int n=0;n&lt;9;n++)
                                branch[m][n]=Data.solution[m][n];
                        Thread thread = new Thread(new ParameterizedThreadStart(solve));
                        thread.Start(branch);
                    }
                }
                return;//仅通过第一个空格来分支多线程
            }
}
static void solve(object obj)//求解线程函数
{
    List&lt;List&lt;char&gt;&gt; solution=(List&lt;List&lt;char&gt;&gt;)obj;
    List&lt;List&lt;int&gt;&gt; current = null;
    DLX sudoku=Sudoku.solve_SudokuMuliti(ref solution, ref current);
    if(sudoku.solve.Count!=0)
    {   
        Data.sudoku.Add(sudoku);
        Data.matrix.Add(current);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="界面的设计"><a href="#界面的设计" class="headerlink" title="界面的设计"></a>界面的设计</h3><p>数独显示在游戏界面左侧,按钮显示在界面右侧,通过Unity中的<code>Animation</code>实现对UI元素的调动</p>
<p>流程图如下所示</p>
<p><img src="%E5%9B%BE%E7%89%87/%E6%B5%81%E7%A8%8B.jpg" alt="流程"></p>
<p>进入游戏后首先进入开始界面,然后进入游戏界面</p>
<p>在游戏胜利后进入游戏结束界面,然后重新返回游戏界面,这是三角小循环</p>
<p>在点击存档后进入存档界面,保存存档后回到游戏界面,这是菱形小循环</p>
<h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><p>该部分介绍实验中遇到的bug与报错</p>
<h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><ul>
<li><p>报错内容</p>
<p>  <code>ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.</code></p>
</li>
<li><p>报错原因</p>
<p>  C#中的<code>List&lt;T&gt;</code>泛型类需要初始化后才能直接使用数组下标访问</p>
</li>
<li><p>解决方案</p>
<p>  在使用数组下标访问前,先用0填充进行初始化</p>
</li>
</ul>
<h3 id="bug1"><a href="#bug1" class="headerlink" title="bug1"></a>bug1</h3><ul>
<li><p>bug内容</p>
<p>  将<code>List&lt;List&lt;char&gt;&gt;&gt;</code>进行复制后发现修改复制后的内容会影响原对象的内容</p>
</li>
<li><p>bug原因</p>
<p>  C#中的<code>List&lt;T&gt;</code>泛型类中的T若仍是<code>&lt;List&lt;char&gt;&gt;</code>会采用传递引用</p>
</li>
<li><p>解决方案</p>
<p>  不采用直接赋值的方式,而是采用对元素逐个赋值的方式进行复制</p>
</li>
</ul>
<h3 id="bug2"><a href="#bug2" class="headerlink" title="bug2"></a>bug2</h3><ul>
<li><p>bug内容</p>
<p>  使用多线程进行求解时发现不同线程求出相同的解</p>
</li>
<li><p>bug原因</p>
<p>  不同线程的执行顺序并不依赖于调用顺序,在主线程对题目进行修改时,调用的线程可能还没能完成对题目的读取,这样会造成两个先后调用的线程本应读取不同的题目却读取了相同的题目</p>
</li>
<li><p>解决方案</p>
<p>  将题目复制成为一个新对象,传递给线程,这样就解除了不同线程对同一个对象进行读取的问题</p>
</li>
</ul>
<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>该部分介绍实验中的收获。</p>
<p>在这次实验中熟悉了<code>DFS</code>算法的使用,新学习了<code>GBFS</code>与<code>DLX</code>两种高级搜索算法,学习了<code>Unity</code>的基本使用方法,同时对Unity所使用的<code>C#</code>语言有了一定的了解,通过与本学期所学习的<code>C++</code>进行对比,对面向对象的编程语言有了深入理解,学习了C++与C#中<code>多线程</code>的调用与执行方式,通过编写这样一个小项目,也提高了代码组织能力和问题的发现与解决能力</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Hyjwpk</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://hyjwpk.github.io/2021/08/08/shu-du/">http://hyjwpk.github.io/2021/08/08/shu-du/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Hyjwpk</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/unity/">
                                    <span class="chip bg-color">unity</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/01/23/yin-xing-ye-wu-mo-ni/">
                    <div class="card-image">
                        
                        <img src="/medias/featureimages/4.jpg" class="responsive-img" alt="银行业务模拟">
                        
                        <span class="card-title">银行业务模拟</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A4%A7%E4%BD%9C%E4%B8%9A/" class="post-category">
                                    大作业
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/qt/">
                        <span class="chip bg-color">qt</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/02/01/zhuan-kuai-da-zhan/">
                    <div class="card-image">
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="砖块大战">
                        
                        <span class="card-title">砖块大战</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-02-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A4%A7%E4%BD%9C%E4%B8%9A/" class="post-category">
                                    大作业
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/easyx/">
                        <span class="chip bg-color">easyx</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="2722795475"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <span id="year">2023</span>
            <a href="/about" target="_blank">Hyjwpk</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">41.8k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/hyjwpk" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2359105286@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2359105286" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2359105286" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

    <script src="https://cdn.jsdelivr.net/gh/hyjwpk/hyjwpk.github.io@main/js/prism.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/hyjwpk/hyjwpk.github.io@main/js/snow.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>

    <script type="text/javascript">
        var OriginTitile=document.title,st;
        document.addEventListener("visibilitychange",function(){
            document.hidden?(document.title="<(￣︶￣)>偷偷藏起来",clearTimeout(st)):(document.title="(*/ω＼*)被发现了",st=setTimeout(function(){document.title=OriginTitile},3e3))
        })
    </script>

</body>

</html>
